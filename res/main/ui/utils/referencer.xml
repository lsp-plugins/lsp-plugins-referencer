<plugin resizable="true">
	<hbox>
		<!-- Main panel -->
		<vbox>
			<!-- Switch between sources -->
			<label text="labels.source" />
			<ui:with id="source" hfill="true">
				<button text="lists.referencer.source.mix" value="0" />
				<button text="lists.referencer.source.reference" value="1" />
				<button text="lists.referencer.source.both" value="2" />
			</ui:with>

			<!-- Mode for stereo version -->
			<ui:if test="ex :mode">
				<label text="labels.mode" />
				<ui:with id="mode" hfill="true">
					<button text="lists.referencer.mode.stereo" value="0" />
					<button text="lists.referencer.mode.inverse_stereo" value="1" />
					<button text="lists.referencer.mode.mono" value="2" />
					<button text="lists.referencer.mode.side" value="3" />
					<button text="lists.referencer.mode.sides" value="4" />
					<button text="lists.referencer.mode.mid_side" value="5" />
					<button text="lists.referencer.mode.side_mid" value="6" />
					<button text="lists.referencer.mode.left_only" value="7" />
					<button text="lists.referencer.mode.left" value="8" />
					<button text="lists.referencer.mode.right" value="9" />
					<button text="lists.referencer.mode.right_only" value="10" />
				</ui:with>
			</ui:if>
			
			<void vexpand="true" />

			<!-- Playback control -->
			<hbox>
				<button id="play" text="icons.playback.play" font.name="lsp-icons" font.size="20" value="0" />
				<button id="play" text="icons.playback.stop" font.name="lsp-icons" font.size="20" value="1" />
				<void hexpand="true" />
			</hbox>
			<!-- Playback matrix -->
			<grid rows="5" cols="5">
				<label text="labels.sedit.sample_num" />
				<cell cols="4">
					<label text="labels.sedit.loop" />
				</cell>
				
				<ui:for id="i" first="1" count="4">
					<label text="${i}" />
					<ui:for id="j" first="1" count="4">
						<button ui:id="play_matrix_${i}_${j}" text="${j}"/>
					</ui:for>
				</ui:for>
			</grid>
		</vbox>
		
		<!-- Tab control for different operations -->
		<tabs id="section">
			<!-- Samples -->
			<cgroup id="ssel" expand="true">
				<ui:for id="si" first="1" count="4">
					<vbox>
						<hbox width.min="650" height.min="256">
							<!-- Sample loader/editor -->
							<asample
								expand="true"
								id="sf_${si}"
								mesh_id="fm_${si}"
								path_id="_ui_dlg_sample_path"
								length=":fl_${si}"
								status=":fs_${si}"
								loop.enabled="true"
								loop.color="loop_color"
								loop.border.color="loop_border_color"
								loop.begin="(:ls_${si} ige 2) ? ((:ls_${si} ige 3) ? :lb_${si}_4 : :lb_${si}_3) : ((:ls_${si} ige 1) ? :lb_${si}_2 : :lb_${si}_1)"
								loop.end="(:ls_${si} ige 2) ? ((:ls_${si} ige 3) ? :le_${si}_4 : :le_${si}_3) : ((:ls_${si} ige 1) ? :le_${si}_2 : :le_${si}_1)"
								play.position="(:ls_${si} ige 2) ? ((:ls_${si} ige 3) ? :pp_${si}_4 : :pp_${si}_3) : ((:ls_${si} ige 1) ? :pp_${si}_2 : :pp_${si}_1)"
								width.min="320"
								height.min="160"
								load.preview="true" />
								
							<!-- Sample list -->
							<void bg.color="bg_graph" pad.h="2" hreduce="true" visibility="(:fs_${si} ine 1)"/>
		
							<vbox vexpand="true" visibility="(:fs_${si} ine 1)">
								<void bg.color="bg_graph" pad.v="2" vreduce="true"/>
								<afolder id="sf_${si}" expand="true" width.min="199"/>
								<void bg.color="bg_graph" pad.v="2" vreduce="true"/>
		
								<ui:with fill="true">
									<hbox pad.h="6" pad.v="4" spacing="4" bg.color="bg_schema">
										<ui:with height="22">
											<anavigator id="sf_${si}" text="icons.navigation_big.first_alt" action="first"/>
											<anavigator id="sf_${si}" text="icons.navigation_big.last_alt" action="last"/>
											<void hexpand="true"/>
											<anavigator id="sf_${si}" text="icons.navigation_big.previous" action="previous"/>
											<anavigator id="sf_${si}" text="icons.navigation_big.next" action="next"/>
											<void hexpand="true"/>
		
											<anavigator id="sf_${si}" text="icons.random.dice_fill" action="random"/>
											<void hexpand="true"/>
											<anavigator id="sf_${si}" text="icons.actions.cancel_alt" action="clear"/>
										</ui:with>
									</hbox>
								</ui:with>
							</vbox>
						</hbox>
							
						<grid rows="4" cols="9" transpose="true">
							<cell rows="2" >
								<label text="labels.gain" />
							</cell>	
							<knob id="sg_${si}" />
							<value id="sg_${si}" />
						
							<ui:for id="li" first="1" count="4">
								<cell cols="2">
									<button id="ls_${si}" text="lists.referencer.loop.${li}" value="${:li - 1}" />
								</cell>
									
								<label text="labels.sedit.loop_start" />
								<knob id="lb_${si}_${li}" max=":fl_${si}" />
								<value id="lb_${si}_${li}" />
								
								<label text="labels.sedit.loop_end" />
								<knob id="le_${si}_${li}" max=":fl_${si}" />
								<value id="le_${si}_${li}" />
							</ui:for>
						
					
						</grid>
					</vbox>
				</ui:for>
			</cgroup>
		</tabs>
	</hbox>
</plugin>
